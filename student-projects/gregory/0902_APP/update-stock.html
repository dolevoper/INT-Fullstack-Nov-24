<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Stock</title>
    <link rel="stylesheet" href="dist/styles.css" />
</head>

<body>
    <main class="reading-view stack">
        <h1 id="formTitle">List of Consumables</h1>
        <form name="consumable items" class="stack">           
            <article class="cluster">
                <button name="save">Update</button>
                <a href="index.html">Back</a>
            </article>
        </form>
    </main>

    <script type="module">
        import { addItem, editItem, getItem, getItems, getQuantity } from "./dist/app.js";
                     
        const stockForm = document.forms.namedItem("consumable items");
        const clusterElement = stockForm.querySelector("article.cluster");
        
        for (const item of getItems()) {
            if (item.category === "Supplies"){
                const itemElement = document.createElement("div");
                itemElement.classList.add("form-control","u-inlineForm");

                const checkBox = document.createElement("input");
                checkBox.setAttribute ("id",item.id);
                checkBox.setAttribute ("type","checkbox");
                itemElement.appendChild(checkBox);

                const itemLable = document.createElement("label");
                itemLable.setAttribute("for",item.id);
                const link = document.createElement("a");                      
                link.textContent = item.name;
                link.setAttribute("href", `add-item.html#${item.id}`);
                itemLable.appendChild(link);
                itemElement.appendChild(itemLable);                

                const quantityInput = document.createElement("input");
                quantityInput.setAttribute ("id",`q_${item.id}`);
                quantityInput.setAttribute ("type","number");
                quantityInput.setAttribute ("min","1");
                const quantityValue = getQuantity(item.id);
                if (quantityValue != -1) {
                    quantityInput.value = quantityValue;
                }
                itemElement.appendChild(quantityInput);              

                stockForm.insertBefore(itemElement,clusterElement);
                
            }                               
        }

        
        // for (const stockItem of getStock()) {

        //     const item = getItem(stockItem.itemId);
        //     const itemEl = document.createElement("li");
        //     itemEl.classList.add("item");
            
        //     const link = document.createElement("a");                      
        //     link.textContent = item.name;
        //     link.setAttribute("href", `add-item.html#${item.id}`);
        //     itemEl.appendChild(link);

        //     const quantity = document.createElement("span");
        //     quantity.textContent = stockItem.quantity;
        //     itemEl.appendChild(quantity);

        //     itemsList.append(itemEl);            
        // }

        
    </script>
</body>

</html>